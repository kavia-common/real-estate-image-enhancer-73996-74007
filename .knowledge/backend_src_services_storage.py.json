{"is_source_file": true, "format": "Python", "description": "This file defines a StorageService class that abstracts over different storage backends (local filesystem or S3). It provides methods to save files and delete stored objects, using configuration settings to determine the backend type and paths.", "external_files": ["src.core.config"], "external_methods": ["src.core.config.get_settings"], "published": ["StorageService"], "classes": [{"name": "StorageService", "description": "A service class providing storage operations such as save and delete, supporting local filesystem and S3 backends."}], "methods": [{"name": "__init__(self)", "description": "Initializes the storage service, setting up local storage directory if needed based on configuration.", "scope": "StorageService", "scopeKind": "class"}, {"name": "str save(self, fileobj: BinaryIO, filename: str, subdir: str = \"\")", "description": "Saves a file object to the configured storage backend and returns a URL or path to access the stored file.", "scope": "StorageService", "scopeKind": "class"}, {"name": "None delete(self, key_or_path: str)", "description": "Deletes a stored object by key or path, implementing deletion logic for local filesystem.", "scope": "StorageService", "scopeKind": "class"}], "calls": ["settings.STORAGE_BACKEND", "Path(settings.LOCAL_STORAGE_PATH).mkdir", "Path(settings.LOCAL_STORAGE_PATH)", "Path(settings.LOCAL_STORAGE_PATH) / subdir", "Path(settings.LOCAL_STORAGE_PATH) / path", "open(dest, 'wb')", "fileobj.read()", "real_path.exists()", "real_path.unlink()"], "search-terms": ["StorageService", "save method", "delete method", "local storage", "S3 backend", "file upload", "file deletion", "storage backend abstraction"], "state": 2, "file_id": 10, "knowledge_revision": 22, "git_revision": "", "ctags": [{"_type": "tag", "name": "StorageService", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/services/storage.py", "pattern": "/^class StorageService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/services/storage.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/services/storage.py", "pattern": "/^    def delete(self, key_or_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, key_or_path: str)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/services/storage.py", "pattern": "/^    def save(self, fileobj: BinaryIO, filename: str, subdir: str = \"\") -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, fileobj: BinaryIO, filename: str, subdir: str = \"\")", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/services/storage.py", "pattern": "/^settings = get_settings()$/", "language": "Python", "kind": "variable"}], "hash": "82ce4eb8c767bba0213e2e7b178f827f", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/services/storage.py", "fields": [{"name": "settings = get_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"22": ""}]}