{"is_source_file": true, "format": "Python", "description": "This is a FastAPI router module defining endpoints for managing edit requests and history for images in a real estate image enhancement application. It includes endpoint functions for requesting edits and retrieving edit history, interacting with database models and security dependencies.", "external_files": ["src.core.db", "src.core.security", "src.models.models", "src.schemas.schemas", "src.services.usage"], "external_methods": ["get_db", "get_current_user"], "published": ["router"], "classes": [{"name": "APIRouter", "description": "FastAPI router instance used to define API endpoints."}], "methods": [{"name": "request_edit( image_id: int, payload: EditRequest, db: AsyncSession = Depends(get_db), user: User = Depends(get_current_user) )", "description": "Handles POST requests to create an edit request for an image, validates ownership, records usage, and returns the created edit history entry.", "scope": "", "scopeKind": ""}, {"name": "edit_history(image_id: int, db: AsyncSession = Depends(get_db), user: User = Depends(get_current_user))", "description": "Handles GET requests to retrieve all edit history entries for an image, validating ownership.", "scope": "", "scopeKind": ""}], "calls": ["select(Image).where(Image.id == image_id, Image.user_id == user.id)", "db.execute()", "UsageService(db, user.id).add_usage()", "select(EditHistory).where(EditHistory.image_id == image_id)"], "search-terms": ["FastAPI image edit router", "edit history endpoint", "image ownership validation", "edit request creation", "async database operations"], "state": 2, "file_id": 15, "knowledge_revision": 32, "git_revision": "", "ctags": [{"_type": "tag", "name": "edit_history", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/routers/edits.py", "pattern": "/^async def edit_history(image_id: int, db: AsyncSession = Depends(get_db), user: User = Depends(g/", "language": "Python", "kind": "function", "signature": "(image_id: int, db: AsyncSession = Depends(get_db), user: User = Depends(get_current_user))"}, {"_type": "tag", "name": "request_edit", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/routers/edits.py", "pattern": "/^async def request_edit($/", "language": "Python", "kind": "function", "signature": "( image_id: int, payload: EditRequest, db: AsyncSession = Depends(get_db), user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/routers/edits.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}], "hash": "fac70cb8835726e8396d9415a2aaa0e2", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/routers/edits.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"32": ""}]}