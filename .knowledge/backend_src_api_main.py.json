{"is_source_file": true, "format": "Python", "description": "Main application file for a FastAPI-based backend API that manages real estate image enhancement. It sets up environment validation, database initialization, CORS middleware, API route inclusion, and request middleware for database sessions and audit logging.", "external_files": ["src.api.routes.auth", "src.api.routes.users", "src.api.routes.images", "src.api.routes.payments", "src.api.routes.webhooks", "src.api.routes.admin", "src.models", "src.utils.audit", "src.utils.config"], "external_methods": ["validate_env_vars", "get_settings", "Base.metadata.create_all", "log_audit_event"], "published": ["health_check"], "classes": [], "methods": [{"name": "health_check()", "description": "A simple health check endpoint that returns a 'Healthy' message.", "scope": "", "scopeKind": ""}, {"name": "audit_middleware(request: Request, call_next)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "db_session_middleware(request: Request, call_next)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fastapi.FastAPI", "fastapi.Request", "fastapi.middleware.cors.CORSMiddleware", "src.models.Base.metadata.create_all", "src.models.engine", "src.models.SessionLocal", "os.getenv", "app.include_router", "app.add_middleware", "log_audit_event"], "search-terms": ["main.py", "FastAPI app setup", "database initialization", "CORS middleware configuration", "API route inclusion", "middleware for database session", "audit logging middleware"], "state": 2, "file_id": 3, "knowledge_revision": 54, "git_revision": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040", "revision_history": [{"8": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}, {"34": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}, {"35": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}, {"44": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}, {"49": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}, {"50": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}, {"51": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}, {"54": "84b029075aed17fa4210f3c47cb9cbd1f7fb5040"}], "ctags": [{"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "audit_middleware", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/main.py", "pattern": "/^async def audit_middleware(request: Request, call_next):$/", "language": "Python", "kind": "function", "signature": "(request: Request, call_next)"}, {"_type": "tag", "name": "db_session_middleware", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/main.py", "pattern": "/^async def db_session_middleware(request: Request, call_next):$/", "language": "Python", "kind": "function", "signature": "(request: Request, call_next)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "missing_vars", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/main.py", "pattern": "/^missing_vars = validate_env_vars()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/main.py", "pattern": "/^settings = get_settings()$/", "language": "Python", "kind": "variable"}], "hash": "7ac3a1779e9681688fa87d5607decfd1", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "missing_vars = validate_env_vars()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "settings = get_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}]}