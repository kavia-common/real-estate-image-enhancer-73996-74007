{"is_source_file": true, "format": "Python", "description": "This file defines a FastAPI route for handling Stripe webhook events related to subscription management. It processes incoming webhook requests, verifies signatures, and updates user subscription status in the database accordingly, while also logging audit events.", "external_files": ["src/utils/security.py", "src/models/user.py", "src/utils/audit.py", "stripe", "os", "dotenv"], "external_methods": ["get_db", "log_audit_event"], "published": ["router"], "classes": [{"name": "APIRouter", "description": "FastAPI's router object used to define API endpoints."}], "methods": [{"name": "stripe_webhook(request: Request, db: Session = Depends(get_db))", "description": "Asynchronous function to handle Stripe webhook POST requests for subscription events, verifies event signatures, updates user subscription status, and logs audit events.", "scope": "", "scopeKind": ""}], "calls": ["stripe.Webhook.construct_event"], "search-terms": ["Stripe webhook", "subscription updates", "FastAPI route", "webhook signature verification", "SQLAlchemy User model"], "state": 2, "file_id": 18, "knowledge_revision": 43, "git_revision": "", "ctags": [{"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/routes/webhooks.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "stripe_webhook", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-74007/backend/src/api/routes/webhooks.py", "pattern": "/^async def stripe_webhook(request: Request, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(request: Request, db: Session = Depends(get_db))"}], "hash": "8503d6c10ebc1f975e37749e38199b1e", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routes/webhooks.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"43": ""}]}